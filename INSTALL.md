# Инструкция по установке и запуску

## Быстрый старт

1. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

2. **Установите браузеры для Playwright:**
```bash
playwright install chromium
```

3. **Подготовьте файл с APP IDs:**
   - Откройте `app_ids.txt`
   - Добавьте APP IDs по одному на строку (пример уже есть)

4. **Запустите парсер:**
```bash
python parser.py
```

## Детальная установка

### Требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)

### Шаг 1: Установка зависимостей

```bash
# Установите все необходимые пакеты
pip install -r requirements.txt
```

### Шаг 2: Установка браузеров

Playwright требует установки браузеров отдельно:

```bash
# Установите Chromium браузер
playwright install chromium
```

Это может занять несколько минут при первом запуске.

### Шаг 3: Подготовка данных

1. Создайте или отредактируйте файл `app_ids.txt`
2. Добавьте APP IDs по одному на строку:
   ```
   730
   440
   570
   271590
   ```

### Шаг 4: Запуск

```bash
python parser.py
```

## Первый запуск

При первом запуске:
1. Парсер создаст базу данных `data/steam_data.db`
2. Создаст необходимые таблицы
3. Если включен headless режим, может потребоваться прохождение Cloudflare challenge
4. Cookies будут сохранены для последующих запусков

## Настройка

Откройте `config.py` для настройки параметров:

- `PARALLEL_THREADS` - количество параллельных потоков (по умолчанию: 10)
- `COMPARE_BATCH_SIZE` - размер батча для Compare (по умолчанию: 10)
- `DELAY_BETWEEN_REQUESTS` - задержка между запросами (по умолчанию: 1.0 сек)
- `HEADLESS` - запуск браузера в фоновом режиме (по умолчанию: True)

## Проверка работы

После запуска вы должны увидеть:
- Логи в консоли
- Прогресс парсинга каждые 10 батчей
- Статистику обработки

## Остановка и возобновление

- Нажмите `Ctrl+C` для остановки
- При следующем запуске парсер продолжит с места остановки
- Уже обработанные APP IDs будут пропущены

## Результаты

Данные сохраняются в SQLite базу `data/steam_data.db`:
- `ccu_history` - история CCU данных
- `price_history` - история цен
- `app_status` - статусы обработки
- `errors` - ошибки для повторной обработки

## Устранение проблем

### Ошибка "playwright not found"
```bash
pip install playwright
playwright install chromium
```

### Ошибка импорта модулей
Убедитесь, что вы находитесь в директории проекта:
```bash
cd "/Users/mikitavalkunovich/Desktop/Cursor/Steam Parser"
python parser.py
```

### Cloudflare блокирует запросы
- Установите `HEADLESS = False` в `config.py` для первого запуска
- Пройдите Cloudflare challenge вручную
- Cookies будут сохранены автоматически

### Нет данных в базе
- Проверьте логи в `logs/parser.log`
- Проверьте таблицу `errors` в базе данных
- Убедитесь, что APP IDs корректны




